<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adding a language switcher :: Embedded Wizard Tutorial</title>
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script src="../../_/js/email-obfuscator.js"></script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../index.html">Embedded Wizard Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://ask.embedded-wizard.de/" target="_blank">Ask for help</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="https://github.com/deining/EmWiTutorial" target="_blank">Project on GitHub </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/deining/EmWiTutorial/tree/master/src" target="_blank">Sources (Embedded Wizard)</a>
            <a class="navbar-item" href="https://github.com/deining/EmWiTutorial/tree/master/www/asciidoc/modules" target="_blank">Markup tutorial site (AsciiDoc)</a>
            <a class="navbar-item" href="https://github.com/deining/EmWiTutorial/tree/master/docs" target="_blank">Tutorial website (HMTL)</a>
            <a class="navbar-item" href="https://github.com/deining/EmWiTutorial/issues" target="_blank">Report an issue</a>
            <a class="navbar-item" href="https://github.com/deining/EmWiTutorial/pulls" target="_blank">Create a pull request</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="https://www.embedded-wizard.de/">Embedded Wizard</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/" target="_blank">Features</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/platforms/" target="_blank">Platforms</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/services/" target="_blank">Services</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/support/" target="_blank">Support</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/cases/" target="_blank">Use cases</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/demo/" target="_blank">Demos</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/news/" target="_blank">News</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/pricing/" target="_blank">Pricing</a>
            <a class="navbar-item" href="https://www.embedded-wizard.de/features/download/" target="_blank">Download</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="https://doc.embedded-wizard.de/" target="_blank">EmWi documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://doc.embedded-wizard.de/basic-concepts" target="_blank">Basic concepts</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/working-with-embedded-wizard" target="_blank">Working with Embedded Wizard</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/platform-integration-and-build-environments" target="_blank">Platform Integration</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/embedded-wizard-studio" target="_blank">Embedded Wizard Studio</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/chora-reference" target="_blank">Programming language chora</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/mosaic_overview" target="_blank">Framework Mosaic</a>
            <a class="navbar-item" href="https://doc.embedded-wizard.de/release-notes" target="_blank">Release notes</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="/EmWiTutorial/EmWiTutorial/latest/_attachments/pdf/Tutorial.pdf">Download PDF version</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="EmWiTutorial" data-version="latest">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="Introduction.html">Embedded Wizard Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Lessons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Authoring your first application</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="HelloWorld.html">Getting started with 'Hello world!'</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="FirstComponent.html">Adding your first GUI component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ComponentReusability.html">Making your GUI component truly reusable</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="DeviceIntegrationBrowser.html">Integrating with browser device</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Localizing your application</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="LocalizingYourApplication.html">Adding languages and localizing your strings</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="LanguageSwitcher.html">Adding a language switcher</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="DemoSite.html">Application demo site</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="DownloadCode.html">Download source code</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="_attachments/pdf/Tutorial.pdf">PDF version of tutorial</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Embedded Wizard Tutorial</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Embedded Wizard Tutorial</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="Introduction.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="Introduction.html">Embedded Wizard Tutorial</a></li>
    <li class="crumb">Lessons</li>
    <li class="crumb">Localizing your application</li>
    <li class="crumb"><a href="LanguageSwitcher.html">Adding a language switcher</a></li>
  </ul>
</nav>
</div>
<article class="doc">
<h1>Adding a language switcher</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="LocalizingYourApplication.html" class="page">last chapter</a>, we added German as second language to the project and created five localizable language strings. Using these language strings, we replaced all hard-coded text strings in the textual elements of our GUI components. That&#8217;s great, our application is localized now. However, currently the user does not have the possibility to change the language of the user interface. We will change this in the next lesson by adding a language switcher to the application.</p>
</div>
<hr>
<div class="sidebarblock">
<div class="content">
<div class="title">Source code</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you didn&#8217;t author or didn&#8217;t keep the <em>Localization</em> project explained in the previous <a href="LocalizingYourApplication.html" class="page">chapter</a>, you may download the <a href="_attachments/code/LocalisationTutorial.zip">sources</a> of this project and use this a starting base to follow the instructions given below.
</td>
</tr>
</table>
</div>
</div>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_adding_the_resources_for_the_language_switcher"><a class="anchor" href="#_adding_the_resources_for_the_language_switcher"></a>Adding the resources for the language switcher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Our language switcher will be quite simple: we will place a English and a German flag side by side in the upper right corner of the application window. Once the user clicks on a flag the language will be changed.</p>
</div>
<div class="paragraph">
<p>First we store the needed image icons inside the project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At the project root level, create a new folder <em>Flags</em>.</p>
</li>
<li>
<p>Download the two flag icons <a href="_attachments/flags/uk.png">uk.png</a> and <a href="_attachments/flags/de.png">de.png</a> and save them in the newly created directory</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_adding_the_flag_bitmap_resources"><a class="anchor" href="#_adding_the_flag_bitmap_resources"></a>Adding the flag bitmap resources</h3>
<div class="paragraph">
<p>Now that we have the two icons available, we will make use of them and create two graphical bitmap resources inside our project. We will put these resources inside a new unit <em>Icons</em> so let&#8217;s go ahead and add the unit first and the two flag bitmap resources afterwards:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the <span class="image"><img src="_images/icons/EmbeddedWizardIcon.png" alt="project icon"></span> <em>Project</em> tab (the first tab from the left).</p>
</li>
<li>
<p>Identify the note frame with the caption <em>GUI project</em>, it currently contains the icon <span class="image"><img src="_images/icons/ApplicationUnitIcon.png" alt="Application unit icon"></span> representing the <em>Application</em> unit and the icon <span class="image"><img src="_images/icons/StringsUnitIcon.png" alt="Strings unit icon"></span> representing the <em>Strings</em> unit.</p>
</li>
<li>
<p>From the gallery templates window to the left (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>), drag the element <span class="image"><img src="_images/icons/UnitIcon.png" alt="profile icon"></span> <em>Unit</em> inside the <em>Chora</em> folder over to the canvas and place it underneath the existing <em>Strings</em> unit. Rename the unit to <em>Icons</em>.</p>
</li>
<li>
<p>Double click on the newly inserted unit <span class="image"><img src="_images/icons/IconsUnitIcon.png" alt="Icon icons unit"></span>. Inside the composer window, a new tab <em>Icons</em> appears which shows the currently empty unit.</p>
</li>
<li>
<p>From the gallery templates window to the left, drag the element <span class="image"><img src="_images/icons/AnnotationGroupIcon.png" alt="annotation group icon"></span> <em>Annotation Group</em>, over to root canvas. Rename the group to <em>Flags</em>.</p>
</li>
<li>
<p>From the gallery templates window to the left, drag the element <span class="image"><img src="_images/icons/BitmapResourceIcon.png" alt="constant icon"></span> <em>Bitmap Resource</em> inside the <em>Resources</em> folder over to the canvas and place it inside the just inserted annotation group. Rename the constant to <em>FlagUK</em>.</p>
</li>
<li>
<p>In the inspector window, change the property <em>FileName</em> of the newly inserted bitmap resource to <em>.\Flags\uk.png</em>. You may either type in the path and filename directly or you can make use of the file chooser that gets invoked one you click at the symbol <em>&#8230;&#8203;</em> located at the right end of the row.</p>
</li>
<li>
<p>From the gallery templates window to the left, drag another <span class="image"><img src="_images/icons/BitmapResourceIcon.png" alt="constant icon"></span> <em>Bitmap Resource</em> element over to the canvas. Rename the constant to <em>FlagGermany</em>.</p>
</li>
<li>
<p>Change the property <em>FileName</em> of the newly inserted bitmap resource to <em>.\Flags\de.png</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Our flag bitmap resources are ready for use now, they should look like illustrated in <a href="#fig:FlagResources">Figure 1</a> below:</p>
</div>
<div id="fig:FlagResources" class="imageblock">
<div class="content">
<img src="_images/languageswitcher/FlagiconResources.png" alt="flag icons">
</div>
<div class="title">Figure 1. Flag bitmap resources</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_a_pushbutton_flag_component"><a class="anchor" href="#_building_a_pushbutton_flag_component"></a>Building a pushbutton flag component</h3>
<div class="paragraph">
<p>With the resources available, we now can build a reusable pushbutton flag component that will be used inside the language switcher component later on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We want to place the push button component in the <em>Application</em> unit, so we have to invoke this unit first: click on the <span class="image"><img src="_images/icons/EmbeddedWizardIcon.png" alt="project icon"></span> <em>Project</em> tab and double click on the <em>Application</em> unit to open the corresponding composer tab. Inside the tab, you should now see the <em>Application</em> root component and the <em>Pushbutton component</em>, built by you.</p>
</li>
<li>
<p>From the gallery templates window to the left, drag the element <span class="image"><img src="_images/icons/AnnotationGroupIcon.png" alt="annotation group icon"></span> <em>Annotation Group</em>, over to root canvas. Rename the group to <em>Language selector</em>.</p>
</li>
<li>
<p>From the gallery templates window (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>) with folder <em><strong>C</strong>omponent Templates</em> opened (press key <kbd>C</kbd> twice), drag an instance of the <span class="image"><img src="_images/icons/PushButtonIcon.png" alt="push button icon"></span> <em>Push Button</em> component template to the component&#8217;s canvas. Place the element right inside the newly created <em>Language selector</em> annotation group. Rename the component to <em>PushButtonFlag</em> using the <kbd>F2</kbd> key.</p>
</li>
<li>
<p>Double click on the newly inserted <span class="image"><img src="_images/icons/PushButtonIcon.png" alt="push button icon"></span> <em>Push Button</em> component. Inside the composer window, a new tab titled <em>Application::PushButtonFlag</em> appears which shows the component template.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We now have to adapt the component to our needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, click on the note element that contains a lot of text and press the <kbd>Del</kbd> key to delete this element.</p>
</li>
<li>
<p><a id="resizing-component"></a>Our flag inside the component has a size of 46 × 33 px. Since we want to have a black one pixel border around the selected flag, the component size should be 48 × 35 px, so let&#8217;s adjust this: click on the property <span class="image"><img src="_images/icons/PropertyIcon.png" alt="property icon"></span> <em>Bounds</em> to select the element. Now, in the in the upper <em>member area</em> of the inspector window right to the main composer window you should see the element named <em>Bounds</em> selected. Also note the attributes and properties area below that shows all properties of the currently selected <em>Bounds</em> property.</p>
</li>
<li>
<p>Inside the attributes and properties area, we can adapt the default bounds values to our needs:</p>
<div class="ulist">
<ul>
<li>
<p>Click on the black triangle left to the <em>Default</em> element. Multiple lines will show up which hold the values for the origin (<em>x</em>, <em>y</em>) and the size of the element (<em><strong>w</strong>idth</em>, <em><strong>h</strong>eight</em>).</p>
</li>
<li>
<p>Alter the <em>w</em> instance property of the component to the value <em>48</em> to set the default width of the component to 48&#160;px.</p>
</li>
<li>
<p>Alter the <em>h</em> instance property of the component to the value <em>35</em> to set the default height of the component to 35&#160;px.</p>
</li>
<li>
<p>In order to adapt the size of the component on the screen, click on the <em>Reload</em> icon <span class="image"><img src="_images/icons/ReloadIcon.png" alt="Reload icon"></span> in the second row of the toolbar or press <kbd>F7</kbd> to reload the class. The blue border of the element will shrink to the new size then.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Looking at the inspector window, we can see that our component consist of three graphical elements, titled <em>Background</em>, <em>Border</em> and <em>TouchHandler</em>. Let&#8217;s adapt these elements, too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adapt the size of the <em>Border</em> element to 48 × 35 px by altering the default width and height of the property <em>Bounds</em> of the <em>Border</em> element (as you did when changing the size of the whole component above).</p>
</li>
<li>
<p>Adapt the size of the <em>TouchHandler</em> element to 48 × 35 px. Do so so, alter the property <em>Point2</em> of the <em>TouchHandler</em> element to <em>&lt;48,0&gt;</em>. Also, set the property <em>Point3</em> to <em>&lt;48,35&gt;</em> and the property <em>Point4</em> to <em>&lt;0,35&gt;</em>. The <em>TouchHandler</em> element should now fit exactly into the component again.</p>
</li>
<li>
<p>Delete the <em>Background</em> element using the <kbd>Del</kbd> key. We don&#8217;t need this element, since we will replace it with our flag icon.</p>
</li>
<li>
<p>Inside the method <em>UpdateViewState</em>, the color of the background is changed depending on the state of the component (pressed, selected, enabled). Since we just deleted the background, we have to remove all references to the deleted element, so inside the method body, look for the 3 code lines <code>Background.Color = #XXXXXXXX;</code> and remove these three lines.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we are ready to insert our flag to the component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the gallery templates window (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>) with folder <em><strong>V</strong>iews</em> opened (key <kbd>V</kbd>), drag an instance of the <span class="image"><img src="_images/icons/ImageIcon.png" alt="image icon"></span> <em>Image</em> bitmap view to the component&#8217;s canvas. Rename the <em>Image</em> element to <em>Flag</em> using the <kbd>F2</kbd> key.</p>
</li>
<li>
<p>Adapt the size of the <em>Image</em> element to 46 × 33 px by altering the default width and height of the property <em>Bounds</em> of the <em>Image</em> element. Define an offset of one pixel from the origin by setting the default <em>x</em> and <em>y</em> coordinate inside the property <em>Bounds</em> to <em>1</em>.</p>
</li>
<li>
<p>Set the property <em>Bitmap</em> of the <em>Image</em> element <em>Icons::FlagUK</em>.</p>
</li>
<li>
<p>In the inspector window, select the <em>Image</em> element and press the keyboard combination <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Down</kbd></span> multiple time to move the <em>Image</em> element down in the element hierarchy. You may stop once you placed the element just below the <em>TouchHandler</em> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While our component is usable now, it is not reusable yet. If at all possible, try to reuse your components! Our goal must be to develop one single flag component only and reuse this component once we add several flags for language switching to the main window. In order to make the component truly reusable, we have to add two <span class="image"><img src="_images/icons/PropertyIcon.png" alt="property icon"></span> properties <em>Language</em> and <em>BitmapFlag</em> to the component. These properties can then be set individually for each component&#8217;s instance used inside the application. Let&#8217;s go and add these properties to our component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the gallery templates window (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>) with folder <em><strong>C</strong>hora</em> opened (key <kbd>C</kbd>), drag an instance of the <span class="image"><img src="_images/icons/AnnotationGroupIcon.png" alt="annotation group icon"></span> <em>Annotation Group</em> to the component&#8217;s canvas. Place the element right beneath the component&#8217;s canvas and rename the property <em>Caption</em> of the element to <em>User defined properties</em> using the inspector window.</p>
</li>
<li>
<p>Now we are ready to insert our properties: Click on the element <span class="image"><img src="_images/icons/PropertyIcon.png" alt="property icon"></span> <em>Property</em>, and drag an instance over to the component&#8217;s canvas. Place the element inside the note rectangle you inserted and adapted in the previous step.</p>
</li>
<li>
<p>The property will be used to store the flag element of our component, therefore we rename the property to <em>BitmapFlag</em> using the <kbd>F2</kbd>. Please note that the names of the <em>OnSet</em> and <em>OnGet</em> methods automatically change to <em>OnSetBitmapFlag</em> and <em>OnGetOnSetBitmapFlag</em> respectively.</p>
</li>
<li>
<p>Currently, the data type of the property is <em>int32</em>, that&#8217;s not what we want, instead we want to store a bitmap resource value (=&#160;the flag used) inside the property. To be able to do so, we change the value of the property <em>Type</em> to <em>Resources::Bitmap</em> inside the inspector window.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The property is now set up, however a change of the property value is not yet reflected inside the flag component. To overcome this, we have to add some code to the OnSet method which is called each time a new value is assigned to the property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Double click on the method <em>OnSetTextHeader</em> of the property. In the code editor window, replace the <em>TO DO:</em> section at the bottom with the code line <code>Flag.Bitmap = value;</code>. Now, if a new value gets assigned to the <em>BitmapFlag</em> property, this is immediately reflected in the GUI.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first property is ready to go, so let&#8217;s add a second property to store the language associated with the flag:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the gallery templates window drag another <span class="image"><img src="_images/icons/PropertyIcon.png" alt="property icon"></span> <em>Property</em> to the component&#8217;s canvas.</p>
</li>
<li>
<p>Rename the property to <em>Language</em> using the <kbd>F2</kbd> key.</p>
</li>
<li>
<p>Change the type of the property to <em>language</em>, with a default value <em>"Default"</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Our flag component is ready for use, it should now look like illustrated in <a href="#fig:PushButtonFlag">Figure 2</a> below:</p>
</div>
<div id="fig:PushButtonFlag" class="imageblock">
<div class="content">
<img src="_images/languageswitcher/PushButtonFlag.png" alt="push button flag" width="1024">
</div>
<div class="title">Figure 2. Finalized push button flag component</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_the_language_switcher_component"><a class="anchor" href="#_building_the_language_switcher_component"></a>Building the language switcher component</h3>
<div class="paragraph">
<p>Next, we need to build the language switcher component, holding two or more flags for language selection:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the gallery templates window (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>) with folder <em><strong>C</strong>omponent Templates</em> opened (press key <kbd>C</kbd> twice), drag an <span class="image"><img src="_images/icons/ComponentIcon.png" alt="component icon"></span> <em>Empty GUI component</em> to the component&#8217;s canvas. Place the element inside the <em>Language selector</em> note group, underneath the <em>PushButton</em> component. Rename the component to <em>LanguageSelector</em> using the <kbd>F2</kbd> key.</p>
</li>
<li>
<p>Double click on the newly inserted <span class="image"><img src="_images/icons/LanguageSelector.png" alt="push button icon"></span> component. Inside the composer window, a new tab titled <em>Application::LanguageSelector</em> appears which shows the empty GUI component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We now have to adapt and fill the component according to our needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, click on the note element that contains a lot of text and press the <kbd>Del</kbd> key to delete this element. Also delete the methods <em>UpdateViewState</em> and <em>UpdateLayout</em>.</p>
</li>
<li>
<p>Adjust the component size to 104 × 35 px so that the component can held two flags. If you don&#8217;t know how to do that remember how you changed the size of the <em>PushButton</em> flag component <a href="#resizing-component">above</a>.</p>
</li>
<li>
<p>Press <span class="keyseq"><kbd>Alt</kbd>+<kbd>2</kbd></span> to select the gallery browser window, left to the main composer window. Alternatively, you may mouse click at the second tab <em>Browser</em> at the very top of the window.</p>
</li>
<li>
<p>In the search field immediately below the two tabs, type in <em>Flag</em> to shorten the class list.</p>
</li>
<li>
<p>Click on the <span class="image"><img src="_images/icons/PushButtonIcon.png" alt="push button icon"></span> <em>Application::PushButtonFlag</em> class and drag an instance of the class over to the canvas. Align the component to the left.</p>
</li>
<li>
<p>Drag another instance of the <span class="image"><img src="_images/icons/PushButtonIcon.png" alt="push button icon"></span> <em>Application::PushButtonFlag</em> class over to the canvas. Align the component to the right.</p>
</li>
<li>
<p>Using the inspector window, change the property <em>BitmapFlag</em> of the secondly inserted push button flag to <em>Icons::FlagGerman</em> and the German flag will be displayed.</p>
</li>
<li>
<p>Using the inspector window, change the property <em>Language</em> of the same flag to <em>German</em>.</p>
</li>
<li>
<p>Inside the gallery templates window (<span class="keyseq"><kbd>Alt</kbd>+<kbd>1</kbd></span>) with folder <em><strong>C</strong>hora</em> opened (key <kbd>C</kbd>), click on the element <span class="image"><img src="_images/icons/SlotMethodIcon.png" alt="slot method icon"></span> <em>Slot Method</em> and drag an instance over to the component&#8217;s canvas.</p>
</li>
<li>
<p>Press <kbd>F2</kbd> to rename the slot method to <em>switchLanguage</em>.</p>
</li>
<li>
<p>Using the inspector window, change the property <em>OnActivate</em> of both flags to the newly created slot method <em>switchLanguage</em>. This way, the <em>switchLanguage</em> slot method gets called once the user clicks on any of the flags. The only object passed to the slot method is the hidden parameter <em>sender</em>, in our case the <em>PushButtonFlag</em> instance the user clicked on.</p>
</li>
<li>
<p>Now, how do we implement language switching once the slot method gets called? That&#8217;s easy, double click on the <span class="image"><img src="_images/icons/RingTheBellSlotIcon.png" alt="slot icon"></span> <em>switchLanguage</em> and fill into the body of the slot method one single Chora code line:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-chora hljs" data-lang="chora">language = ((Application::PushButtonFlag)sender).Language;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code line looks complicated to you? Let&#8217;s explain it: at the very beginning, left to the equal sign, we see built in global variable <em>language</em>. When assigning a language member name to this global variable, the language will be switched. So what gets assigned to this global variable? Simply the value of the property <em>Language</em> of the sender object, which is the <em>PushButtonFlag</em> instance the user clicked on. Since the slot method does not know anything about the identity of the sender, we have to cast the hidden parameter <em>sender</em> to an instance of the <em>Application::PushButtonFlag</em> class, that&#8217;s what the construct <code>(Application::PushButtonFlag)sender</code> does.</p>
</div>
<div class="paragraph">
<p>Our language switcher is ready for use, it should now look like illustrated in <a href="#fig:LanguageSwitcher">Figure 3</a> below:</p>
</div>
<div id="fig:LanguageSwitcher" class="imageblock">
<div class="content">
<img src="_images/languageswitcher/LanguageSelector.png" alt="language selector">
</div>
<div class="title">Figure 3. Finalized language switcher</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_the_language_switcher_to_the_main_screen"><a class="anchor" href="#_adding_the_language_switcher_to_the_main_screen"></a>Adding the language switcher to the main screen</h3>
<div class="paragraph">
<p>TODO</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Source code</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you encountered difficulties and didn&#8217;t succeed when following the instructions given above, you may download the <a href="_attachments/code/LanguageSwitcherTutorial.zip">project sources</a> of the finalized example on how to add a language switcher to your application.
</td>
</tr>
</table>
</div>
</div>
</div>
<hr>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This tutorial was authored and published by <script type="text/javascript">document.write("<a href='mailto:" + obfuscateEmail() + "'>")</script>Dr. Andreas Deininger</a> using the <a href="https://antora.org/" target="_blank">antora</a> publishing toolchain.<br/>
  This tutorial and the source code of the associated sample project are licensed under the terms of the MIT license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
